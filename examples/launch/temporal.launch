<launch>
	<!-- vim: set ft=xml noet : -->
	<!-- Example of using Freyja with temporal trajectories. -->

	<!-- allowed autopilots: "asctec" or "arducopter" -->
	<arg name="autopilot"                 default="arducopter" />
	<arg name="vicon_topic"               default="/vicon/F1/F1" />

	<!-- use "device:baudrate" for apm, "device" for asctec -->
	<arg name="comm_port"                 default="/dev/ttyUSB0:57600"/>
	<arg name="total_mass"                default="0.95"/>

	<!-- true if testing an example flight -->
	<arg name="example_trajectory"        default="hover" /><!-- "hover", "circle1", "circle2", "circle3" -->

  <!-- advanced settings -->
	<arg name="use_velctrl_only" default="false"/>
	<arg name="bias_compensation" default="false" />

  <!-- autostart rosbag -->
	<arg name="start_rosbag" default="false"/>

	<!-- Include Freyja controller -->
	<include file="$(find freyja)/launch/freyja_controller.launch">
		<arg name="autopilot" value="$(arg autopilot)"/>
		<arg name="vicon_topic" value="$(arg vicon_topic)"/>
		<arg name="comm_port" value="$(arg comm_port)"/>
		<arg name="total_mass" value="$(arg total_mass)"/>
		<arg name="use_waypoint_handler" value="false"/>
		<arg name="use_velctrl_only" value="$(arg use_velctrl_only)"/>
		<arg name="bias_compensation" value="$(arg bias_compensation)"/>
	</include>

	<!-- Include waypoint controller -->
	<node name="temporal_provider_node" pkg="examples" type="temporal_provider_node">
    <param name="example_traj_type" type="string" value="$(arg example_trajectory)"/>
  </node>

  <!-- Record stuff -->
  <node name="recorder" pkg="rosbag" type="record" args="-a" if="$(eval start_rosbag)" />

	<!-- Temp -->
	<node name="reference_to_point_node" pkg="examples" type="ref_to_point.py">
  </node>

</launch>
